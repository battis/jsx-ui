(self.webpackChunk_battis_jsx_ui=self.webpackChunk_battis_jsx_ui||[]).push([[336],{4609:()=>{(()=>{var e,t={1416:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(5835));class o{static encode(e){return Math.floor(e).toString(36).padStart(2,"0")}static identifier(e=40,t=o.encode){let r=new Uint8Array((e+1)/2);return r=i.default.randomBytes(r.length),Array.from(r,t).join("").substr(0,e)}}t.default=o},950:()=>{},6601:()=>{},9214:()=>{},8623:()=>{},7748:()=>{},5568:()=>{},6619:()=>{},7108:()=>{},2361:()=>{},4616:()=>{}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,e=[],n.O=(t,r,i,o)=>{if(!r){var s=1/0;for(l=0;l<e.length;l++){for(var[r,i,o]=e[l],a=!0,u=0;u<r.length;u++)(!1&o||s>=o)&&Object.keys(n.O).every((e=>n.O[e](r[u])))?r.splice(u--,1):(a=!1,o<s&&(s=o));if(a){e.splice(l--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,i,o]},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={826:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var i,o,[s,a,u]=r,c=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(u)var l=u(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(l)},r=self.webpackChunk_battis_identifier=self.webpackChunk_battis_identifier||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=n.O(void 0,[835],(()=>n(1416)));i=n.O(i)})()},1889:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.APIError=t.API=t.Authentication=void 0;const a=o(r(5782));t.API=a.default,Object.defineProperty(t,"APIError",{enumerable:!0,get:function(){return a.APIError}});const u=s(r(8047));t.Authentication=u.default},5782:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.APIError=void 0;const s=o(r(6470)),a=o(r(8047)),u=o(r(3692));class c extends Error{constructor(e){super(`API Status ${e.status} (${e.statusText})`),this.response=e}static isAPIError(e){return"response"in e}}t.APIError=c;class l extends u.default{static get url(){return this._url}static init(e){var{url:t}=e,r=i(e,["url"]);l.config=Object.assign({url:t},r),l._url=new URL(l.config.url),l.markInitialized()}static call(e,t=!0,r){return n(this,void 0,void 0,(function*(){try{l.requireInitialization()}catch(e){throw e}if(!e.endpoint)throw new Error("Request endpoint required");t&&(r=Object.assign(Object.assign({},r),{Authorization:`Bearer ${yield a.default.getAccessToken()}`}));const n={method:e.method,headers:r};"GET"!==e.method&&"body"in e&&("string"==typeof e.body||e.body instanceof FormData?n.body=e.body:(n.headers=Object.assign(Object.assign({},n.headers),{"Content-Type":"application/json"}),n.body=JSON.stringify(e.body)));const i=yield fetch(l.buildUrl(e.endpoint),n);if(200===i.status)return yield i.json();if(401!==i.status)throw new c(i);a.default.userLogin()}))}static get(e,t,r){var{endpoint:n}=e,o=i(e,["endpoint"]);return void 0===t&&(t=!0),l.call(Object.assign({method:"GET",endpoint:n},o),t,r)}static post(e,t,r){var{endpoint:n}=e,o=i(e,["endpoint"]);return void 0===t&&(t=!0),l.call(Object.assign({method:"POST",endpoint:n},o),t,r)}static put(e,t,r){var{endpoint:n}=e,o=i(e,["endpoint"]);return void 0===t&&(t=!0),l.call(Object.assign({method:"PUT",endpoint:n,body:""},o),t,r)}static delete(e,t,r){var{endpoint:n}=e,o=i(e,["endpoint"]);return void 0===t&&(t=!0),l.call(Object.assign({method:"DELETE",endpoint:n},o),t,r)}static buildUrl(...e){return new URL(s.default.join(l._url.pathname,...e),l._url).href}}t.default=l},8047:function(e,t,r){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},u=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Login=void 0;const l=c(r(6470)),d=c(r(4609)),h=s(r(8250)),f=r(5410),p=s(r(5782)),_=s(r(4639)),m=c(r(6628)),g=c(r(1875)),y=c(r(7897)),v=c(r(4463)),b=c(r(3692));class O{constructor(e){var{client:t,request:r,authorize_uri:n}=e;u(e,["client","request","authorize_uri"]),this.client=t,this.request=r,this.authorize_uri=n}render(){return h.default.createElement("form",{method:"post",action:this.authorize_uri},h.default.createElement("h1",null,this.client.display_name),h.default.createElement("p",null,"$this.client.description"),Object.getOwnPropertyNames(this.request).map((e=>h.default.createElement("input",{name:e,type:"hidden",value:this.request[e]}))),h.default.createElement("div",{class:"form-controls"},h.default.createElement("label",null,"username"),h.default.createElement("input",{name:"username",type:"text"}),h.default.createElement("label",null,"password"),h.default.createElement("input",{name:"password",type:"password"})),h.default.createElement("div",{class:"buttons"},h.default.createElement("button",{class:"default",type:"submit",name:"authorized",value:"yes"},"Login"),h.default.createElement("button",{type:"button",onclick:()=>v.default.redirectTo("/")},"Cancel")))}}t.Login=O;class w extends b.default{static get login_path(){return w.config.login_path}static get logout_path(){return w.config.logout_path}static get oauth2_redirect_path(){return w.config.oauth2_redirect_path}static get oauth2_authorize_path(){return w.config.oauth2_authorize_path}static get oauth2_authorized_path(){return w.config.oauth2_authorized_path}static get authorize_uri(){return p.default.buildUrl(w.config.authorize_endpoint)}static get token_endpoint(){return w.config.token_endpoint}static get client_endpoint(){return w.config.client_endpoint}static get clientDescriptor(){return w.config.clientDescriptor}static get Login(){return w.config.loginComponent}static get logoutHandler(){return w.config.logoutHandler}static get oauth2_redirect_uri(){return`${location.protocol}//${l.default.join(`${location.hostname}${location.port?`:${location.port}`:""}`,v.default.root,w.oauth2_redirect_path)}`}static get access_token(){return f.Cookie.get(w.COOKIE_ACCESS_TOKEN)}static get refresh_token(){return f.Cookie.get(w.COOKIE_REFRESH_TOKEN)}static get oauth_state(){return f.Cookie.get(w.COOKIE_STATE)}static set oauth_state(e){f.Cookie.set({name:w.COOKIE_STATE,value:e})}static get bookmark(){const e=f.Cookie.get(w.COOKIE_BOOKMARK)||"/";return f.Cookie.delete(this.COOKIE_BOOKMARK),e}static set bookmark(e){switch(l.default.join("/",e)){case w.login_path:case w.oauth2_redirect_path:f.Cookie.delete(w.COOKIE_BOOKMARK);break;default:f.Cookie.set({name:w.COOKIE_BOOKMARK,value:e})}}static init(e={}){w.config=Object.assign(Object.assign({},w.config),e),v.default.add(w.login_path,w.userLogin).add(w.logout_path,w.userLogout).add(w.oauth2_authorize_path,w.handleAuthorization).add(w.oauth2_redirect_path,w.handleOAuth2Redirect).add(w.oauth2_authorized_path,w.handleAuthorized),w.markInitialized()}static requireAuthentication(){w.access_token||w.userLogin()}static displaySpinner(){}static handleOAuth2Redirect(){return a(this,void 0,void 0,(function*(){const e=f.Query.parseGetParameters();e.error?(0,h.render)(h.default.createElement("div",null,h.default.createElement("h1",null,e.error),h.default.createElement("p",null,e.error_description),h.default.createElement("p",null,h.default.createElement("a",{href:"/",onclick:e=>{e.preventDefault(),v.default.navigateTo("/")}},"Go home")))):yield w.requestAuthorizationCodeGrant()}))}static handleAuthorization(){return a(this,void 0,void 0,(function*(){this.displaySpinner(),w.oauth_state=d.default.identifier();const e=Object.assign(Object.assign({},new _.default(w.oauth_state)),f.Query.parseGetParameters());w._client=yield w.clientDescriptor(e.client_id),(0,h.render)(h.default.createElement(w.Login,{client:w._client,request:e,authorize_uri:w.authorize_uri}))}))}static handleAuthorized(){var e;(0,h.render)(h.default.createElement("div",null,h.default.createElement("h1",null,`${(null===(e=w._client)||void 0===e?void 0:e.display_name)||"Application"} Authorized`," closeable=",!1),h.default.createElement("p",null,"You may close this window."))),w._client=void 0}static getAccessToken(){return a(this,void 0,void 0,(function*(){return w.access_token?w.access_token:w.refresh_token?yield w.requestRefreshTokenGrant():void w.userLogin()}))}static requestAuthorizationCodeGrant(){return a(this,void 0,void 0,(function*(){const e=f.Query.parseGetParameters();if(w.oauth_state===e.state){f.Cookie.delete(w.COOKIE_STATE);try{w.storeToken(new y.default(yield p.default.post({endpoint:w.token_endpoint,body:new _.AuthorizationCodeGrantRequest(e)},!1)))}catch(e){if(!p.APIError.isAPIError(e))throw e;w.userLogin()}v.default.navigateTo(w.bookmark)}else w.userLogin()}))}static requestRefreshTokenGrant(){return a(this,void 0,void 0,(function*(){try{if(w.refresh_token)return w.storeToken(new y.default(yield p.default.post({endpoint:w.token_endpoint,body:new g.default(w.refresh_token)},!1))),w.access_token}catch(e){if(p.APIError.isAPIError(e))return void w.userLogin();throw e}throw new Error("called without a valid refresh token")}))}static storeToken(e){f.Cookie.set({name:w.COOKIE_ACCESS_TOKEN,value:e.access_token,expires:{expires_in:e.expires_in,unit:"seconds"}}),f.Cookie.set({name:w.COOKIE_REFRESH_TOKEN,value:e.refresh_token,expires:{expires_in:24,unit:"weeks"}})}}t.default=w,n=w,w.config={login_path:"/oauth2/login",logout_path:"/oauth2/logout",oauth2_redirect_path:"/oauth2/redirect",oauth2_authorize_path:"/oauth2/authorize",oauth2_authorized_path:"/oauth2/authorized",authorize_endpoint:"/oauth2/authorize",token_endpoint:"/oauth2/token",client_endpoint:"/oauth2/client",clientDescriptor:e=>a(void 0,void 0,void 0,(function*(){return yield p.default.get({endpoint:l.default.join(w.client_endpoint,e)},!1)})),loginComponent:O,logoutHandler:()=>v.default.navigateTo(w.config.login_path)},w.COOKIE_STATE="oauth2_state",w.COOKIE_ACCESS_TOKEN="access_token",w.COOKIE_REFRESH_TOKEN="refresh_token",w.COOKIE_BOOKMARK="bookmark",w.userLogin=()=>{w.access_token?v.default.navigateTo("/"):(n.displaySpinner(),w.oauth_state=d.default.identifier(),w.bookmark=`${v.default.currentPath}${location.search}`,w.clientDescriptor(m.default.client_id).then((e=>{(0,h.render)(h.default.createElement(w.Login,{client:e,request:new _.default(w.oauth_state),authorize_uri:w.authorize_uri}))})))},w.userLogout=()=>{f.Cookie.delete(w.COOKIE_ACCESS_TOKEN),f.Cookie.delete(w.COOKIE_REFRESH_TOKEN),w.logoutHandler()}},7428:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(6628));t.default=class{constructor(){this.client_id=i.default.client_id}}},4639:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationCodeGrantRequest=void 0;const i=n(r(8047)),o=n(r(7428)),s=r(5410),a=n(r(6628));class u extends s.GetRequestParameters{constructor(e){super(),this.response_type="code",this.redirect_uri=i.default.oauth2_redirect_uri,this.state=e,this.client_id=a.default.client_id}}t.default=u;class c extends o.default{constructor(e){super(),this.grant_type="authorization_code",this.redirect_uri=i.default.oauth2_redirect_uri,this.code=e.code}}t.AuthorizationCodeGrantRequest=c},6628:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(3692));class o extends i.default{static get client_id(){return this.requireInitialization(),this._client_id}static init(e){this._client_id=e.client_id,this.markInitialized()}}t.default=o},1875:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(7428));class o extends i.default{constructor(e){super(),this.grant_type="refresh_token",this.refresh_token=e}}t.default=o},7897:function(e,t){"use strict";var r=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){var{access_token:t,expires_in:n}=e,i=r(e,["access_token","expires_in"]);this.access_token=t,this.expires_in=n;for(const e of Object.getOwnPropertyNames(i))this[e]=i[e]}}},9336:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Container=t.ServerComponent=t.StatefulComponent=t.Component=void 0;const i=n(r(2350));t.Component=i.default;const o=n(r(7215));t.Container=o.default;const s=n(r(1880));t.ServerComponent=s.default;const a=n(r(9178));t.StatefulComponent=a.default},291:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.instanceOfComparable=void 0,t.instanceOfComparable=function(e){return e&&"equals"in e&&"function"==typeof e.equals&&"compareTo"in e&&"function"==typeof e.compareTo}},2350:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.instanceOfComponentizedElement=void 0;const s=o(r(8250));function a(e){return e instanceof Element&&"component"in e}t.instanceOfComponentizedElement=a;class u{constructor(e){this._element=null,e&&(e instanceof HTMLElement?this.element=e:this.element="object"==typeof e?s.default.createElement("div",Object.assign({},e)):s.default.elementFromSource(e)())}bindTo(e){return e.component=this,e}getElement(){return this._element||this.bindTo(this.render())}get element(){return this.getElement()}set element(e){this.setElement(e)}get htmlElement(){if(this.element instanceof HTMLElement)return this.element}setElement(e){var t,r;const n=this.bindTo(e);(null===(t=this._element)||void 0===t?void 0:t.isConnected)&&(null===(r=this._element.parentElement)||void 0===r||r.replaceChild(n,this._element)),this._element=n}get children(){return this.getChildren()}getChildren(){var e;return null===(e=this._element)||void 0===e?void 0:e.children}render(e){return this._element&&e?((0,s.render)(this._element,e),this._element):this.element=s.default.createElement("div",null,e)}static for(e){return a(e)&&e.component instanceof this?e.component:null}static querySelector(e,t=document){const r=(t instanceof u?t.element:t).querySelector(e);if(r){const e=this.for(r);if(e)return e}return null}static querySelectorAll(e,t=document){const r=[];return(t instanceof u?t.element:t).querySelectorAll(e).forEach((e=>{const t=this.for(e);t instanceof this&&r.push(t)})),r}static parent(e){let t=e;do{const e=this.for(t);if(e instanceof this)return e;t=t.parentElement}while(t);return null}get isConnected(){var e;return!!(null===(e=this._element)||void 0===e?void 0:e.isConnected)}}t.default=u},7215:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(8250)),o=r(291),s=n(r(2350));class a extends s.default{get children(){return this.element.children}constructor(...e){const[t=i.default.createElement("div",null),r=[]]=e;super(t),this.addAll(r)}add(e){if((0,o.instanceOfComparable)(e))for(let t=0;t<this.element.children.length;t++){const r=this.element.children.item(t),n=r&&s.default.for(r);if(!n||!(0,o.instanceOfComparable)(n))break;if(n.equals(e))return this.replaceChild(e,n);if(n.compareTo(e)>=0)return this.insertBefore(e,n)}this.appendChild(e)}appendChild(e){e.element&&this.element&&this.element.appendChild(e.element)}replaceChild(e,t){for(const r of Object.getOwnPropertyNames(e))e[r]instanceof a&&r in t&&e[r].addAll(t[r].children);if(!t.isConnected)throw console.error({parent:this.element,newChild:e.element,oldChild:t.element}),new TypeError;this.element.replaceChild(e.element,t.element)}insertBefore(e,t){e.element&&t.element&&this.element&&this.element.insertBefore(e.element,t.element)}addAll(e){Array.from(e).forEach((e=>this.add(e)))}remove(e){e.element.remove()}isEmpty(){return this.children.length>0}clear(){this.element.innerHTML=""}}t.default=a},1880:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(6470)),s=r(1889),a=i(r(9178));class u extends a.default{constructor(...e){super(...e)}get id(){return this.state.id}static create(e){return n(this,void 0,void 0,(function*(){const t=yield s.API.post({endpoint:this.serverPath,body:e});return t?new this(t):null}))}static get(e,t){return n(this,void 0,void 0,(function*(){if(t){const r=document.body.querySelectorAll(t);for(let t=0;t<r.length;t++){const n=this.for(r[t]);if((null==n?void 0:n.id)===e)return n}}const r=yield s.API.get({endpoint:o.default.join(this.serverPath,e)});let n;return r&&(n=new this(r)),n||null}))}static list(){return n(this,void 0,void 0,(function*(){return(yield s.API.get({endpoint:this.serverPath})).map((e=>new this(e)))}))}update(e){return n(this,void 0,void 0,(function*(){for(const t of Object.getOwnPropertyNames(this.state))t in e&&e[t]===this.state[t]&&delete e[t];if(Object.getOwnPropertyNames(e).length){const t=yield s.API.put({endpoint:o.default.join(this.constructor.serverPath,this.id),body:e});this.updateState(t)}}))}delete(){return n(this,void 0,void 0,(function*(){yield s.API.delete({endpoint:o.default.join(this.constructor.serverPath,this.id)}),this.element.remove()}))}editCallback(e){return n(this,void 0,void 0,(function*(){yield this.update(e)}))}editableProperties(){const e={};return Object.getOwnPropertyNames(this.state).filter((e=>"id"!==e)).forEach((t=>e[t]=this.state[t])),e}updateState(e){for(const t of Object.getOwnPropertyNames(e))this.state[t]=e[t]}}t.default=u},9178:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(r(8250)),u=s(r(2350));class c extends u.default{constructor(...e){let t,r={};e.length&&(e[0]instanceof HTMLElement||"string"==typeof e[0]?[t,r={}]=e:[r]=e),super(t),this.state=new Proxy(r,{set:(e,t,r)=>(e[t]=r,this.onStateChange(t,r),!0)})}setElement(e){super.setElement(e);for(const e in this.state)this.onStateChange(e,this.state[e])}getChildren(){var e;return null===(e=this.element.querySelector(".children"))||void 0===e?void 0:e.children}render(e){this._element||(this._element=a.default.createElement("div",null));const t=Object.getOwnPropertyNames(this.state).filter((e=>this.isRenderableProperty(e)));return this._element&&(0,a.render)(this._element,a.default.createElement(a.default.createFragment,null,a.default.createElement("div",{class:"type"},this.constructor.name),a.default.createElement("div",{class:"state"},t.map((e=>a.default.createElement("div",null,a.default.createElement("span",{class:"label"},e),a.default.createElement("span",{class:e},this.renderProperty(e)))))),a.default.createElement("div",{class:"children"},e))),this._element}onStateChange(e,t){var r;if(this.isRenderableProperty(e)){const n=null===(r=this.element)||void 0===r?void 0:r.querySelectorAll(`.${e.toString()}`);let i;if(t instanceof u.default)i=e=>(0,a.render)(e,t.element);else{const r=this.renderValue(t,e);i=e=>e.innerHTML=r}for(let e=0;n&&e<n.length;e++)c.parent(n[e])===this&&i(n[e])}}isRenderableProperty(e,t=[]){return"_"!==e.charAt(0)&&"_id"!==e.substr(-3)&&!t.includes(e)}renderProperty(e){const t=this.state[e];return t instanceof u.default?t.element:this.renderValue(t,e)}renderValue(e,t){return"function"==typeof e?e.toString():"object"==typeof e?JSON.stringify(e):String(e)}}t.default=c},8250:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.renderFragment=t.render=t.JSXComponent=t.JSXFactory=void 0;const s=r(2704);Object.defineProperty(t,"render",{enumerable:!0,get:function(){return s.render}}),Object.defineProperty(t,"renderFragment",{enumerable:!0,get:function(){return s.renderFragment}});const a=o(r(3420));t.JSXFactory=a.default,Object.defineProperty(t,"JSXComponent",{enumerable:!0,get:function(){return a.JSXComponent}}),t.default=a.default},3420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.instanceOfJSXComponent=t.JSXComponent=void 0;const n=r(2704);class i{constructor(e){}}function o(e){return e instanceof i||e&&"function"==typeof e.render}t.JSXComponent=i,t.instanceOfJSXComponent=o;const s={createElement:(e,t={},...r)=>{if(r=(r=n._Array.flatten(r)).filter((e=>!!e)).map((e=>e instanceof Element?e:o(e)?e.render():"function"==typeof e?e():String(e))),"string"==typeof e)return s.parseElement(e,t,r);if("function"==typeof e)try{return new e(t).render(r)}catch(n){try{return e(t,r)}catch(i){throw console.error({element:e,properties:t,children:r}),new TypeError(`element not instantiable:\n${n}\n\nelement also not callable:\n${i}`)}}throw console.error({element:e,properties:t,children:r}),new TypeError},createFragment:(e,...t)=>t,elementFromSource:e=>{const t=document.createElement("div");return t.innerHTML=e,()=>{var e;return null===(e=t.firstElementChild)||void 0===e?void 0:e.cloneNode(!0)}},parseElement:(e,t={},...r)=>{const n=document.createElement(e);if(t)for(const e of Object.getOwnPropertyNames(t))/^on/.test(e)&&"function"==typeof t[e]?n.addEventListener(e.replace(/^on/,"").toLowerCase(),t[e]):"boolean"==typeof t[e]?n[e]=t[e]:n.setAttribute(e,t[e]);const i=(e,t)=>{if(t)if(Array.isArray(t))for(const r of t)i(e,r);else e.appendChild(t.nodeType?t:document.createTextNode(t))};for(const e of r)i(n,e);return n}};t.default=s},5410:()=>{(()=>{"use strict";var e={416:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Text=t.GetRequestParameters=t.Query=t.expirationToDate=t.Cookie=t.Browser=void 0;const a=s(r(881));t.Browser=a.default;const u=o(r(111));t.Cookie=u.default,Object.defineProperty(t,"expirationToDate",{enumerable:!0,get:function(){return u.expirationToDate}});const c=o(r(754));t.Query=c.default,Object.defineProperty(t,"GetRequestParameters",{enumerable:!0,get:function(){return c.GetRequestParameters}});const l=s(r(663));t.Text=l.default},881:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r{static allowSelectAndBlur(e){e.addEventListener("mousedown",(e=>e.preventDefault()))}}t.default=r,r.iOS=class{static isMobileSafari(){const e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),r=!!e.match(/WebKit/i);return t&&r&&!e.match(/CriOS/i)}static mobileSafariKeyboardFixedElement(e,t="0px"){if(r.iOS.isMobileSafari()){const r=()=>{e.style.top=`calc(${window.scrollY}px + ${t})`},n=()=>{e.style.position="absolute",r(),document.addEventListener("scroll",r)},i=()=>{e.style.position="fixed",e.style.top=t,document.removeEventListener("scroll",r)};e.addEventListener("focus",n,{capture:!0}),e.addEventListener("blur",i,{capture:!0})}return e}}},111:function(e,t){var r=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};function n(e){switch(typeof e){case"number":e=new Date(e);break;case"object":if(!(e instanceof Date)){let t=1;switch(e.unit){case"weeks":t*=7;case"days":t*=24;case"hours":t*=60;case"minutes":t*=60;case"seconds":t*=1e3}e=new Date(Date.now()+e.expires_in*t)}}return e}function i(e){return e.replace(/;/g,";")}Object.defineProperty(t,"__esModule",{value:!0}),t.expirationToDate=void 0,t.expirationToDate=n,t.default=class{static set(e){var{name:t,value:o,path:s="/"}=e,a=r(e,["name","value","path"]);let u=`${encodeURIComponent(t)}=${encodeURIComponent(o)}; path=${i(s)}`;for(const e in a)switch(e){case"secure":case"samesite":!0!==a[e]&&(u+=`; ${e}`);break;case"maxAgeInSeconds":"number"==typeof a[e]&&(u+=`; max-age=${a[e]}`);break;case"expires":a[e]=n(a[e]).toUTCString();default:u+=`; ${e}=${i(a[e])}`}document.cookie=u}static get(e){const t=document.cookie.match(new RegExp(`(?:^|; )${encodeURIComponent(e)}=([^;]*)`));return t?decodeURIComponent(t[1]):void 0}static delete(e){this.set({name:e,value:"",maxAgeInSeconds:-1})}}},754:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetRequestParameters=void 0,t.GetRequestParameters=class{},t.default=class{static queryString(e){return Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&")}static parseGetParameters(e){e||(e=location.href);const t=e.indexOf("?");let r=e.indexOf("#");if(-1==r&&-1==t)return{};-1==r&&(r=e.length);const n=-1==t||r==t+1?e.substring(r):e.substring(t+1,r),i={};return n.split("&").forEach((function(e){if(!e)return;const t=(e=e.split("+").join(" ")).indexOf("=");let r=t>-1?e.substr(0,t):e;const n=t>-1?decodeURIComponent(e.substr(t+1)):"",o=r.indexOf("[");if(-1==o)i[decodeURIComponent(r)]=n;else{const e=r.indexOf("]",o),t=decodeURIComponent(r.substring(o+1,e));r=decodeURIComponent(r.substring(0,o)),i[r]||(i[r]=[]),t?i[r][t]=n:i[r].push(n)}})),i}static getFormData(e){return Object.keys(e).reduce(((t,r)=>(t.append(r,e[r]),t)),new FormData)}}},663:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r{static titleCase(e,t=["a","and","as","for","of","or","the","to"]){let r=!0;const n=new RegExp(`^(${t.join("|")})(\\W+.*)*$`,"i");e=e.toLowerCase();for(let t=0;t<e.length;t++)/[a-z]/i.test(e[t])&&r?(0!==t&&n.test(e.slice(t))||(e=e.slice(0,t)+e[t].toUpperCase()+e.slice(t+1)),r=!1):r=/\W/.test(e[t]);return e}static camelCase(e,t=!1,r=/[^a-z0-9]+/i){return e=e.split(r).map((e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())).join(""),t&&(e=e.replace(/^[^a-z]+/i,"")),e.charAt(0).toLowerCase()+e.substr(1)}static unCamelCase(e){return e.replace(/([^0-9 ])([0-9])/g,"$1 $2").replace(/([^A-Z ])([A-Z])/g,"$1 $2")}static oxfordCommaList(e){return e.join(", ").replace(/, ([^,]+)$/,(e.length>2?",":"")+" and $1")}static scalarToBool(e){switch(typeof e){case"boolean":return e;case"number":return 0!=e;case"string":switch(e.toLowerCase()){case"":case"false":case"no":case"0":return!1;default:return!0}default:return!(null==e)}}static isBooleanValue(e){if("string"==typeof e)switch(e.toLowerCase()){case"true":case"false":case"yes":case"no":case"0":case"1":return!0}return!1}}t.default=r,r.PlaceholderString=class extends String{constructor(e,...t){super(...t),this._config=e}finalize(...e){let t=this.valueOf();for(const r of Object.keys(this._config))t=t.replace(r,this._config[""+r](...e));return t}}}},t={};!function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(416)})()},4463:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(9937)),o=n(r(3692)),s=n(r(6470));class a extends o.default{static get root(){return a.requireInitialization(),a.router.root}static get currentPath(){return location.pathname.replace(RegExp(`^${a.router.root}(.*)`),"$1")}static init(e){return a.router=new i.default(e),a.markInitialized(),a}static add(e,t,r){return a.requireInitialization(),a.router.add(e,t,r),a}static addRedirect(e,t){return a.requireInitialization(),a.router.add(e,(()=>a.navigateTo(t))),a}static navigateTo(e,t,r){return a.requireInitialization(),a.router.navigateTo(e,t,r),a}static addUriListener(){return a.router.addUriListener(),a}static redirectTo(e,t,r){return a.router.redirectTo(e,t,r),a}static check(){return a.router.check(),a}static buildUrl(e){return`${window.location.protocol}//`+s.default.join(window.location.host,a.router.root,e)}}t.default=a},2704:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._Object=t._HTML=t.renderFragment=t.render=t._DOM=t._Array=void 0;const a=s(r(1938));t._Array=a.default;const u=o(r(1127));t._DOM=u.default,Object.defineProperty(t,"render",{enumerable:!0,get:function(){return u.render}}),Object.defineProperty(t,"renderFragment",{enumerable:!0,get:function(){return u.renderFragment}});const c=s(r(2422));t._HTML=c.default;const l=s(r(6332));t._Object=l.default},1938:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={flatten:(e,t=[])=>{for(let n=0,i=e.length;n<i;n++){const i=e[n];Array.isArray(i)?r.flatten(i,t):t.push(i)}return t},range:(e,t)=>{void 0===t&&(t=e,e=0);const r=[];for(let n=e;n<=t;n+=(t-e)/Math.abs(t-e))r.push(n);return r}};t.default=r},1127:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.renderFragment=t.render=void 0;const i=n(r(1938)),o=e=>"object"==typeof e&&"render"in e&&"function"==typeof e.render,s=e=>"object"==typeof e&&"element"in e&&e.element instanceof Element;t.render=(e,r)=>{let n=e;r||(r=n,n=process.env.ROOT_SELECTOR||document.body),"string"==typeof n&&(n=document.querySelector(n)),n&&(s(n)&&(n=n.element),o(r)&&(r=r.render()),n&&n instanceof Element&&("string"==typeof r?n.innerHTML=r:r instanceof Element?(n.innerHTML="",n.appendChild(r)):Array.isArray(r)&&(0,t.renderFragment)(n,r)))},t.renderFragment=(e,t)=>{let r=e;if(!(t=i.default.flatten(t))&&Array.isArray(r)&&(t=r,r=process.env.ROOT_SELECTOR||document.body),"string"==typeof r&&(r=document.querySelector(r)),s(r)&&(r=r.element),r&&t&&r instanceof Element){r.innerHTML="";for(let e of t)o(e)&&(e=e.render()),s(e)&&(e=e.element),"string"==typeof e?r.innerHTML+=e:r.appendChild(e)}};const a={render:t.render,renderFragment:t.renderFragment,getStylesFor:e=>{const t=document.styleSheets,r=[];e.matches=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;for(const n of Object.getOwnPropertyNames(t)){const i=t[n].rules||t[n].cssRules;for(const t of Object.getOwnPropertyNames(i)){const n=i[t];n instanceof CSSStyleRule&&e.matches(n.selectorText)&&r.push(n)}}return r},waitFor:(e,t,r)=>{new MutationObserver(((e,n)=>{for(const i of e){let e=!1;if(i.addedNodes.forEach((n=>{const i=n.querySelector(t);i&&(e=!0,r(i))})),e)return void n.disconnect()}})).observe(e,{childList:!0,subtree:!0})},rectContains:(e,t,r)=>e.left<=t&&t<=e.right&&e.top<=r&&r<=e.bottom};t.default=a},2422:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(4609)),o=r(1127),s={asyncSelectControl:({name:e,value:t,resizing:r=!0,loader:n})=>{const s=document.createElement("select");s.name=e,s.disabled=!0,s.innerHTML='\n            <option disabled={true} selected={true} value="">\n                Loading&hellip;\n            </option>\n        ';const a={},u=e=>{const r={};e.id&&(r.value=e.id),e.handler&&("value"in r||(r.value=`asyncSelectControl@${i.default.identifier()}`),a[r.value]=e.handler);const n=document.createElement("option");n.selected=e.id===t,n.disabled=!!e.disabled;for(const e in r)n[e]=r[e];return n.innerHTML=e.name,n},c=(e,t)=>{(0,o.render)(t,e.map(u))};return s.load=(...e)=>{n(...e).then((e=>{r||(s.style.width=`${s.clientWidth}px`),s.innerHTML="";for(const t of e)if(Array.isArray(t)){const e=document.createElement("optgroup");c(t,e),s.appendChild(e)}else s.appendChild(u(t));Object.getOwnPropertyNames(a).length&&(s.onchange=e=>{s.value in a&&(e.stopPropagation(),a[s.value](e,s))}),s.disabled=!1}))},s.load(),s}};t.default=s},6332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={excludeProperties:(e,t)=>Object.keys(e).filter((e=>t instanceof RegExp&&!t.test(e)||Array.isArray(t)&&!t.includes(e))).reduce(((t,r)=>(t[r]=e[r],t)),{}),includeProperties:(e,t)=>Object.keys(e).filter(t instanceof RegExp?e=>t.test(e):e=>t.includes(e)).reduce(((t,r)=>(t[r]=e[r],t)),{}),transformPropertyNames:(e,t)=>Object.keys(e).reduce(((r,n)=>(r[t(n)]=e[n],r)),{})};t.default=r},3692:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static requireInitialization(){if(!this.initialized)throw new Error(`${this.name} not yet initialized`)}static markInitialized(){this.initialized=!0}}t.default=r,r.initialized=!1},6470:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var u=n.lastIndexOf("/");if(u!==n.length-1){-1===u?(n="",i=0):i=(n=n.slice(0,u)).length-1-n.lastIndexOf("/"),o=a,s=0;continue}}else if(2===n.length||1===n.length){n="",i=0,o=a,s=0;continue}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(o+1,a):n=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===r&&-1!==s?++s:s=-1}return n}var n={resolve:function(){for(var e,n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s;o>=0?s=arguments[o]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(n=s+"/"+n,i=47===s.charCodeAt(0))}return n=r(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&i&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var i=arguments[r];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r)return"";if((e=n.resolve(e))===(r=n.resolve(r)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,s=o-i,a=1;a<r.length&&47===r.charCodeAt(a);++a);for(var u=r.length-a,c=s<u?s:u,l=-1,d=0;d<=c;++d){if(d===c){if(u>c){if(47===r.charCodeAt(a+d))return r.slice(a+d+1);if(0===d)return r.slice(a+d)}else s>c&&(47===e.charCodeAt(i+d)?l=d:0===d&&(l=0));break}var h=e.charCodeAt(i+d);if(h!==r.charCodeAt(a+d))break;47===h&&(l=d)}var f="";for(d=i+l+1;d<=o;++d)d!==o&&47!==e.charCodeAt(d)||(0===f.length?f+="..":f+="/..");return f.length>0?f+r.slice(a+l):(a+=l,47===r.charCodeAt(a)&&++a,r.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,i=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(r=e.charCodeAt(s))){if(!o){i=s;break}}else o=!1;return-1===i?n?"/":".":n&&1===i?"//":e.slice(0,i)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var n,i=0,o=-1,s=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,u=-1;for(n=e.length-1;n>=0;--n){var c=e.charCodeAt(n);if(47===c){if(!s){i=n+1;break}}else-1===u&&(s=!1,u=n+1),a>=0&&(c===r.charCodeAt(a)?-1==--a&&(o=n):(a=-1,o=u))}return i===o?o=u:-1===o&&(o=e.length),e.slice(i,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!s){i=n+1;break}}else-1===o&&(s=!1,o=n+1);return-1===o?"":e.slice(i,o)},extname:function(e){t(e);for(var r=-1,n=0,i=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(47!==u)-1===i&&(o=!1,i=a+1),46===u?-1===r?r=a:1!==s&&(s=1):-1!==r&&(s=-1);else if(!o){n=a+1;break}}return-1===r||-1===i||0===s||1===s&&r===i-1&&r===n+1?"":e.slice(r,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+"/"+n:n}(0,e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,i=e.charCodeAt(0),o=47===i;o?(r.root="/",n=1):n=0;for(var s=-1,a=0,u=-1,c=!0,l=e.length-1,d=0;l>=n;--l)if(47!==(i=e.charCodeAt(l)))-1===u&&(c=!1,u=l+1),46===i?-1===s?s=l:1!==d&&(d=1):-1!==s&&(d=-1);else if(!c){a=l+1;break}return-1===s||-1===u||0===d||1===d&&s===u-1&&s===a+1?-1!==u&&(r.base=r.name=0===a&&o?e.slice(1,u):e.slice(a,u)):(0===a&&o?(r.name=e.slice(1,s),r.base=e.slice(1,u)):(r.name=e.slice(a,s),r.base=e.slice(a,u)),r.ext=e.slice(s,u)),a>0?r.dir=e.slice(0,a-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n},9937:function(e){e.exports=function(){function e(e){var t=this._getSettings(e);if(this.notFoundHandler=t.page404,this.mode=window.history&&window.history.pushState?t.mode:"hash",this.root="/"===t.root?"/":"/"+this._trimSlashes(t.root)+"/",this.beforeHook=t.hooks.before,this.securityHook=t.hooks.secure,this.routes=[],t.routes&&t.routes.length>0){var r=this;t.routes.forEach((function(e){r.add(e.rule,e.handler,e.options)}))}return this._pageState=null,this._currentPage=null,this._skipCheck=!1,this._action=null,"hash"===this.mode&&(this._historyStack=[],this._historyIdx=0,this._historyState="add"),this}return e.Page=function(e,t,r,n,i){this.uri=e||"",this.query=t||{},this.params=r||[],this.state=n||null,this.options=i||{}},e.prototype._getSettings=function(e){var t={},r={routes:[],mode:"history",root:"/",hooks:{before:function(){},secure:function(){return!0}},page404:function(e){console.error({page:e,message:"404. Page not found"})}};return e=e||{},["routes","mode","root","page404"].forEach((function(n){t[n]=e[n]||r[n]})),t.hooks=Object.assign({},r.hooks,e.hooks||{}),t},e.prototype._getHistoryFragment=function(){var e=decodeURI(window.location.pathname);return"/"!==this.root&&(e=e.replace(this.root,"")),this._trimSlashes(e)},e.prototype._getHashFragment=function(){var e=window.location.hash.substr(1).replace(/(\?.*)$/,"");return this._trimSlashes(e)},e.prototype._getFragment=function(){return"history"===this.mode?this._getHistoryFragment():this._getHashFragment()},e.prototype._trimSlashes=function(e){return"string"!=typeof e?"":e.toString().replace(/\/$/,"").replace(/^\//,"")},e.prototype._page404=function(t){this._currentPage=new e.Page(t),this.notFoundHandler(t)},e.prototype._parseRouteRule=function(e){if("string"!=typeof e)return e;var t=this._trimSlashes(e).replace(/([\\\/\-\_\.])/g,"\\$1").replace(/\{[a-zA-Z]+\}/g,"(:any)").replace(/\:any/g,"[\\w\\-\\_\\.]+").replace(/\:word/g,"[a-zA-Z]+").replace(/\:num/g,"\\d+");return new RegExp("^"+t+"$","i")},e.prototype._parseQuery=function(e){var t={};return"string"!=typeof e||("?"===e[0]&&(e=e.substr(1)),this._queryString=e,e.split("&").forEach((function(e){var r=e.split("=");""!==r[0]&&(void 0===r[1]&&(r[1]=!0),t[decodeURIComponent(r[0])]=r[1])}))),t},e.prototype._getHistoryQuery=function(){return this._parseQuery(window.location.search)},e.prototype._getHashQuery=function(){var e=window.location.hash.indexOf("?"),t=-1!==e?window.location.hash.substr(e):"";return this._parseQuery(t)},e.prototype._getQuery=function(){return"history"===this.mode?this._getHistoryQuery():this._getHashQuery()},e.prototype.add=function(e,t,r){return this.routes.push({rule:this._parseRouteRule(e),handler:t,options:r}),this},e.prototype.remove=function(e){var t=this;return"string"==typeof e&&(e=this._parseRouteRule(e).toString()),this.routes.some((function(r,n){return(r.handler===e||r.rule.toString()===e)&&(t.routes.splice(n,1),!0)})),this},e.prototype.reset=function(){return this.routes=[],this.mode=null,this.root="/",this._pageState={},this.removeUriListener(),this},e.prototype._pushHistory=function(){var e=this._getFragment();"hash"===this.mode&&("add"===this._historyState&&(this._historyIdx!==this._historyStack.length-1&&this._historyStack.splice(this._historyIdx+1),this._historyStack.push({path:e,state:this._pageState}),this._historyIdx=this._historyStack.length-1),this._historyState="add")},e.prototype._unloadCallback=function(e){var t;return this._skipCheck?!e||Promise.resolve(!0):this._currentPage&&this._currentPage.options&&this._currentPage.options.unloadCb?(t=this._currentPage.options.unloadCb(this._currentPage,e),!e||t instanceof Promise?t:t?Promise.resolve(t):Promise.reject(t)):!e||Promise.resolve(!0)},e.prototype._findRoute=function(){var t=this,r=this._getFragment();return this.routes.some((function(n){var i=r.match(n.rule);if(i){i.shift();var o=t._getQuery(),s=new e.Page(r,o,i,t._pageState,n.options);return!!t.securityHook(s)&&(t._currentPage=s,t._skipCheck?(t._skipCheck=!1,!0):(t.beforeHook(s),n.handler.apply(s,i),t._pageState=null,window.onbeforeunload=function(e){if(!t._unloadCallback(!1))return e.returnValue=!0,!0},!0))}return!1}))},e.prototype._treatAsync=function(){var e;(e=this._currentPage.options.unloadCb(this._currentPage,!0))instanceof Promise||(e=e?Promise.resolve(e):Promise.reject(e)),e.then(this._processUri.bind(this)).catch(this._resetState.bind(this))},e.prototype._resetState=function(){this._skipCheck=!0,this.navigateTo(this._current,this._currentPage.state,!0)},e.prototype._processUri=function(){var e=this._getFragment();this._current=e,this._pushHistory(),this._findRoute.call(this)||this._page404(e)},e.prototype.check=function(){return this._skipCheck||(this._currentPage&&this._currentPage.options&&this._currentPage.options.unloadCb?this._treatAsync():this._processUri()),this},e.prototype.addUriListener=function(){return"history"===this.mode?window.onpopstate=this.check.bind(this):window.onhashchange=this.check.bind(this),this},e.prototype.removeUriListener=function(){return window.onpopstate=null,window.onhashchange=null,this},e.prototype.redirectTo=function(e,t,r){return e=this._trimSlashes(e)||"",this._pageState=t||null,this._skipCheck=!!r,"history"===this.mode?(history.replaceState(t,null,this.root+this._trimSlashes(e)),this.check()):(this._historyIdx--,window.location.hash=e,this)},e.prototype.navigateTo=function(e,t,r){return e=this._trimSlashes(e)||"",this._pageState=t||null,this._skipCheck=!!r,"history"===this.mode?(history.pushState(t,null,this.root+this._trimSlashes(e)),this.check()):(window.location.hash=e,this)},e.prototype.refresh=function(){if(!this._currentPage)return this;var e=this._currentPage.uri+"?"+this._queryString;return this.navigateTo(e,this._currentPage.state)},e.prototype.back=function(){return"history"===this.mode?(window.history.back(),this):this.go(this._historyIdx-1)},e.prototype.forward=function(){return"history"===this.mode?(window.history.forward(),this):this.go(this._historyIdx+1)},e.prototype.go=function(e){if("history"===this.mode)return window.history.go(e),this;var t=this._historyStack[e];return t?(this._historyIdx=e,this._historyState="hold",this.navigateTo(t.path,t.state)):this},e}()}}]);